<div
  id="mySidebar"
  class="sidebar overflow-auto"
  [style]="this.show == true ? 'width:250px' : 'width:0'"
>
  <a class="py-4 text-start sidebar-board" mat-button (click)="sprintId = null">
    <p class="text-wrap">{{ boardData.name }}</p>
  </a>
  <div *ngFor="let sprint of sprintData; let i = index">
    <a
      [ngStyle]="{ color: sprint.color }"
      (click)="chargeSprint(sprint._id)"
      class="p-2 fs-5 text-wrap"
      mat-button
    >
      <b>{{ sprint.title }}</b
      >&nbsp;&nbsp;<mat-icon>playlist_play</mat-icon>
    </a>
    <div *ngIf="sprint.sprintOptions" class="text-center">
      <button
        mat-button
        matTooltip="Nueva Task"
        [matTooltipShowDelay]="500"
        (click)="addTask(sprint._id, boardData._id)"
      >
        <mat-icon class="text-white text-wrap fs-6">library_add</mat-icon>
      </button>
      <button
        mat-button
        matTooltip="Borrar Sprint"
        [matTooltipShowDelay]="500"
        (click)="deleteSprint()"
      >
        <mat-icon class="text-white fs-6">delete_forever</mat-icon>
      </button>
      <button
        mat-button
        matTooltip="Actualizar Sprint"
        [matTooltipShowDelay]="500"
        (click)="updateSprint(sprint._id, boardData._id)"
      >
        <mat-icon class="text-white fs-6">settings</mat-icon>
      </button>
    </div>
  </div>
  <a mat-button class="fs-6" (click)="saveSprint(boardData._id)"
    >Add Sprint <mat-icon>library_add</mat-icon></a
  >
</div>

<div
  id="main"
  [style]="this.show == true ? 'margin-left: 250px' : 'margin-left: 0;'"
>
  <div class="contentListTask">
    <!--
    [style]="boardData.boardImg != '' ? 'background: url('+boardData.boardImg+') no-repeat;background-repeat: no-repeat;background-size: cover;width: 100%;height: 100%;': '' "
  -->
    <button class="openbtn" (click)="this.show = !this.show">
      <mat-icon>{{
        this.show == true ? "keyboard_arrow_left" : "keyboard_arrow_right"
      }}</mat-icon>
    </button>
    <app-list-task
      *ngIf="sprintId != null"
      [sprintId]="this.sprintId"
      [boardId]="this.boardData._id"
      (onChange)="onChangeSprint($event)"
    ></app-list-task>

    <div *ngIf="sprintId == null">
      <p class="display-5 fw-bold text-center text-title">
        <br />
        Bienvenido al Board: <u>{{ boardData.name }}</u>
      </p><br />
      <p class="fs-4 text-center">{{ boardData.description }}</p>

      <p class="fs-5 text-center p-4">
        <mat-tab-group mat-align-tabs="start">
          <mat-tab label="Invitar Usuarios">
            <!--inicio chips-->
            <mat-form-field class="example-chip-list" appearance="fill">
              <mat-label>Invitar usuarios</mat-label>
              <mat-chip-list #chipList aria-label="Mail selection">
                <mat-chip
                  *ngFor="let email of emails"
                  [selectable]="selectable"
                  [removable]="removable"
                  (removed)="remove(email)"
                >
                  {{ email }}
                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>

                <input
                  placeholder="Selecciona mail..."
                  #emailInput
                  [formControl]="emailCtrl"
                  [matAutocomplete]="auto"
                  [matChipInputFor]="chipList"
                  [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                  (matChipInputTokenEnd)="add($event)"
                />
              </mat-chip-list>
              <mat-autocomplete
                #auto="matAutocomplete"
                (optionSelected)="selected($event)"
              >
                <mat-option
                  *ngFor="let email of filteredEmails | async"
                  [value]="email"
                >
                  {{ email }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <button mat-fab class="color-button"
             (click)="mailAction(emailInput.value)"
            >
              <mat-icon>supervisor_account</mat-icon>
            </button>
          <!--FIN chips-->
          </mat-tab>
          <mat-tab label="Actualizar Board">
            <div class="form">
              <mat-card class="card">
                <mat-card-title>Actualizar Tablero<br /></mat-card-title>
                <mat-card-content>
                  <div class="container">
                    <mat-form-field>
                      <input
                        matInput
                        name="nameUpdate"
                        #nameUpdate
                        placeholder="{{this.boardData.name}}"
                        required
                      />
                    </mat-form-field>
                    <mat-form-field>
                      <input
                        matInput
                        #descriptionUpdate
                        placeholder="{{this.boardData.description}}"
                        required
                      />
                    </mat-form-field>
                    <img 
                      *ngIf="this.userImg != ''"
                      class="m-3"
                      width="100px"
                      [src]="this.userImg"
                      alt=""
                    />
                    <mat-form-field>
                      <ngx-mat-file-input
                        placeholder="Enter a image"
                        class="input-file"
                        (change)="uploadImg($event)"
                      ></ngx-mat-file-input>
                      <mat-icon matSuffix>folder</mat-icon>
                    </mat-form-field>
                  </div>
                </mat-card-content>
                <mat-card-actions>
                  <button class="button" 
                  (click)="updateBoard(descriptionUpdate.value, nameUpdate.value)"
                  mat-raised-button>Actualizar</button>
                </mat-card-actions>
              </mat-card>
            </div>
          </mat-tab>
        </mat-tab-group>


        <!--div  *ngIf="sprintId == null" >      
      <p class="fs-5 text-center p-4">
        Prueba de background Board
        <br><br>
        <img [src]="boardData.boardImg" class="img-fluid w-25 h-25 align-content-center" alt="">
        <br>
        (Aquí irán opciones para actualizar el board)
      </p>
    </div-->
      </p>
    </div>
  </div>
</div>
